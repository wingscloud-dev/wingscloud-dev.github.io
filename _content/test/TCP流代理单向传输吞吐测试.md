## TCP流代理单向传输吞吐测试

**通过最近将TCP流微服务用go重写，速度提升200%，多次测试7000mbps, 峰值可以达到7400mpbs,如果CPU换到12代可能吞吐率还有提升空间。**

1. 环境

   > Intel(R) Core(TM) i5-6400 CPU @ 2.70GHz
   >
   > Ubuntu 18.04

2. 测试步骤

   > 1. 接收端启动服务端：iperf -s 10.1.1.3 -p 12347 -l 8960 -i 1 -t 30
   >
   > 2. 接收端启动：./rs-tcp --d 1 --h 127.0.0.1 --p 12347
   >
   > 3. 发送端启动：./rs-tcp --d 0 --h 127.0.0.1 --p 12347
   >
   > 4. 发送端客户端：iperf -c 127.0.0.1 -p 12347 -i 1 -t 30 -l 8960 -b 50000M

3. 结论

   > 协程高并发，速率6800mbps, 吞吐率提升180%。如果CPU提升到12代，可能还能提升。

   ![image-20240816083543784](D:\markdown\img\image-20240816083543784.png)

   ![image-20240816081632778](D:\markdown\img\image-20240816081632778.png)